<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Term Overlap Analysis</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
            overflow: hidden;
        }
        #root {
            width: 100%;
            height: 100%;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        .bubble-transition {
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18" />
                <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
        );

        const VennDiagram = () => {
            const [selectedTheme, setSelectedTheme] = useState(null);
            const [hoveredNode, setHoveredNode] = useState(null);
            const [orderBy, setOrderBy] = useState('certificate');

            const colors = {
                primary: '#241451',
                yellow: '#DEE140',
                green: '#6EB77C',
                red: '#ED4634',
                gray: '#969796',
                lightGray: '#F2F3F2'
            };

            const termIcons = {
                certificate: 'üìú',
                certification: '‚úÖ',
                course: 'üìö',
                training: 'üéì',
                program: 'üè´'
            };

            // Theme data
            const themesData = [
        {
                "theme": "A",
                "keywords": 13,
                "totalSearchVolume": 5280.0,
                "clicks": 33.0,
                "cost": 306.90999999999997,
                "impressions": 477.0,
                "category": "Other",
                "description": "Analytics + Modifier - contains 'analytics' and a modifier term but not specific subject"
        },
        {
                "theme": "AWS",
                "keywords": 11,
                "totalSearchVolume": 3110.0,
                "clicks": 1.0,
                "cost": 14.27,
                "impressions": 51.0,
                "category": "Other",
                "description": "AWS - competitor/partner brand mentions"
        },
        {
                "theme": "BA",
                "keywords": 104,
                "totalSearchVolume": 90080.0,
                "clicks": 1330.0,
                "cost": 12458.959999999994,
                "impressions": 13156.0,
                "category": "Other",
                "description": "Business Analytics - includes 'business analytics', 'business analysis', 'business analyst' keywords"
        },
        {
                "theme": "BI",
                "keywords": 26,
                "totalSearchVolume": 25810.0,
                "clicks": 29.0,
                "cost": 285.89,
                "impressions": 259.0,
                "category": "Other",
                "description": "Business Intelligence - includes 'business intelligence' keywords"
        },
        {
                "theme": "Coursera",
                "keywords": 32,
                "totalSearchVolume": 24670.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 0.0,
                "category": "Other",
                "description": "Coursera - competitor brand mentions"
        },
        {
                "theme": "D",
                "keywords": 10,
                "totalSearchVolume": 8360.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 38.0,
                "category": "Other",
                "description": "Data + Modifier - contains 'data' and a modifier term but not specific subject"
        },
        {
                "theme": "DA",
                "keywords": 160,
                "totalSearchVolume": 407180.0,
                "clicks": 2193.0,
                "cost": 21512.159999999996,
                "impressions": 25271.0,
                "category": "Other",
                "description": "Data Analytics - includes 'data analytics', 'data analysis', 'data analyst' keywords"
        },
        {
                "theme": "Databricks",
                "keywords": 2,
                "totalSearchVolume": 350.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 4.0,
                "category": "Other",
                "description": "Databricks theme"
        },
        {
                "theme": "Datacamp",
                "keywords": 7,
                "totalSearchVolume": 2170.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 3.0,
                "category": "Other",
                "description": "Datacamp theme"
        },
        {
                "theme": "DS",
                "keywords": 36,
                "totalSearchVolume": 37110.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 22.0,
                "category": "Other",
                "description": "Data Science - includes 'data science' and 'data scientist' keywords"
        },
        {
                "theme": "DV",
                "keywords": 12,
                "totalSearchVolume": 3940.0,
                "clicks": 2.0,
                "cost": 9.34,
                "impressions": 82.0,
                "category": "Other",
                "description": "Data Visualization - includes 'data visualization' keywords"
        },
        {
                "theme": "Free",
                "keywords": 68,
                "totalSearchVolume": 37580.0,
                "clicks": 1.0,
                "cost": 5.06,
                "impressions": 6.0,
                "category": "Other",
                "description": "Free - contains the word 'free'"
        },
        {
                "theme": "Google",
                "keywords": 48,
                "totalSearchVolume": 106390.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 0.0,
                "category": "Other",
                "description": "Google - competitor brand mentions"
        },
        {
                "theme": "Irrelevant",
                "keywords": 273,
                "totalSearchVolume": 417510.0,
                "clicks": 25.0,
                "cost": 234.14000000000001,
                "impressions": 805.0,
                "category": "Other",
                "description": "Irrelevant - higher education (masters, MBA) or specific industries not covered in the course"
        },
        {
                "theme": "Less Than 100",
                "keywords": 6319,
                "totalSearchVolume": 101340.0,
                "clicks": 246.0,
                "cost": 2454.249999999999,
                "impressions": 3815.0,
                "category": "Other",
                "description": "Less Than 100 - keywords with <100 monthly searches (aggregated)"
        },
        {
                "theme": "No course",
                "keywords": 79,
                "totalSearchVolume": 169590.0,
                "clicks": 43.0,
                "cost": 398.85,
                "impressions": 1623.0,
                "category": "Other",
                "description": "No course theme"
        },
        {
                "theme": "Placement",
                "keywords": 7,
                "totalSearchVolume": 1070.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 0.0,
                "category": "Other",
                "description": "Placement theme"
        },
        {
                "theme": "Power BI",
                "keywords": 64,
                "totalSearchVolume": 83760.0,
                "clicks": 122.0,
                "cost": 1209.2899999999997,
                "impressions": 2610.0,
                "category": "Other",
                "description": "Power BI - keywords specifically about Power BI tool"
        },
        {
                "theme": "Python",
                "keywords": 24,
                "totalSearchVolume": 16500.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 15.0,
                "category": "Other",
                "description": "Python - keywords specifically about Python programming"
        },
        {
                "theme": "SQL",
                "keywords": 9,
                "totalSearchVolume": 15330.0,
                "clicks": 15.0,
                "cost": 158.07,
                "impressions": 315.0,
                "category": "Other",
                "description": "SQL - keywords specifically about SQL"
        },
        {
                "theme": "Tableau",
                "keywords": 35,
                "totalSearchVolume": 24770.0,
                "clicks": 41.0,
                "cost": 441.5199999999999,
                "impressions": 796.0,
                "category": "Other",
                "description": "Tableau - keywords specifically about Tableau tool"
        },
        {
                "theme": "Thinkful",
                "keywords": 1,
                "totalSearchVolume": 210.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 5.0,
                "category": "Other",
                "description": "Thinkful theme"
        },
        {
                "theme": "Udacity",
                "keywords": 3,
                "totalSearchVolume": 780.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 0.0,
                "category": "Other",
                "description": "Udacity theme"
        },
        {
                "theme": "Udemy",
                "keywords": 3,
                "totalSearchVolume": 1230.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 0.0,
                "category": "Other",
                "description": "Udemy theme"
        },
        {
                "theme": "No Course",
                "keywords": 16,
                "totalSearchVolume": 41420.0,
                "clicks": 6.0,
                "cost": 64.04,
                "impressions": 176.0,
                "category": "Other",
                "description": "No Course - does not contain any modifier terms (certificate, course, certification, training, program, etc)"
        },
        {
                "theme": "Other",
                "keywords": 1,
                "totalSearchVolume": 260.0,
                "clicks": 0.0,
                "cost": 0.0,
                "impressions": 4.0,
                "category": "Other",
                "description": "Other theme"
        }
];

            // Map theme properties for display
            const processedThemes = themesData.map((t, idx) => ({
                ...t,
                id: idx,
                name: t.theme,
                volume: t.totalSearchVolume,
                color: ['#241451', '#6EB77C', '#ED4634', '#DEE140', '#969796'][idx % 5],
                size: Math.sqrt(t.totalSearchVolume) / 15 + 30,
                terms: {
                    certificate: (t.keywords > 0 ? (t.cost / t.keywords) : 0),
                    certification: (t.clicks / Math.max(t.keywords, 1)) * 10,
                    course: (t.totalSearchVolume / Math.max(t.keywords, 1)) / 100,
                    training: (t.impressions / Math.max(t.keywords, 1)) / 10,
                    program: (t.keywords / 10)
                },
                percent: `${((t.totalSearchVolume / 1230000) * 100).toFixed(1)}%`,
                examples: []
            }));

            // Sort by selected term
            const sortedThemes = [...processedThemes].sort((a, b) => {
                const aValue = a.terms[orderBy] || 0;
                const bValue = b.terms[orderBy] || 0;
                return aValue - bValue;
            });
            
            // Split into two rows
            const midpoint = Math.ceil(sortedThemes.length / 2);
            const topRow = sortedThemes.slice(0, midpoint);
            const bottomRow = sortedThemes.slice(midpoint);

            const width = 1000;
            const topY = 220;
            const bottomY = 520;
            const padding = 80;

            // Evenly space bubbles across the width
            const spaceBubbles = (bubbles, y) => {
                const spacing = (width - 2 * padding) / (bubbles.length + 1);
                return bubbles.map((theme, idx) => ({
                    ...theme,
                    x: padding + spacing * (idx + 1),
                    y: y
                }));
            };

            const positionedThemes = [
                ...spaceBubbles(topRow, topY),
                ...spaceBubbles(bottomRow, bottomY)
            ];

            const maxValue = Math.max(...themesData.map(t => t.terms[orderBy] || 0));

            return (
                <div style={{ position: 'relative', width: '100%', height: '100vh', background: colors.lightGray }}>
                    {/* Control panel */}
                    <div style={{
                        position: 'absolute',
                        top: '20px',
                        left: '50%',
                        transform: 'translateX(-50%)',
                        background: 'white',
                        padding: '15px 25px',
                        borderRadius: '12px',
                        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
                        zIndex: 100,
                        display: 'flex',
                        alignItems: 'center',
                        gap: '15px'
                    }}>
                        <label style={{ 
                            fontWeight: '600', 
                            color: colors.primary,
                            fontSize: '15px'
                        }}>
                            Order by:
                        </label>
                        <select
                            value={orderBy}
                            onChange={(e) => setOrderBy(e.target.value)}
                            style={{
                                padding: '8px 12px',
                                fontSize: '15px',
                                border: `2px solid ${colors.primary}`,
                                borderRadius: '8px',
                                background: 'white',
                                color: colors.primary,
                                fontWeight: '600',
                                cursor: 'pointer',
                                outline: 'none'
                            }}
                        >
                            <option value="certificate">üìú Certificate</option>
                            <option value="certification">‚úÖ Certification</option>
                            <option value="course">üìö Course</option>
                            <option value="training">üéì Training</option>
                            <option value="program">üè´ Program</option>
                        </select>
                        <div style={{
                            padding: '8px 15px',
                            background: colors.lightGray,
                            borderRadius: '8px',
                            fontSize: '14px',
                            color: colors.gray
                        }}>
                            Max: {maxValue.toFixed(1)}%
                        </div>
                    </div>

                    <svg viewBox="0 0 1000 700" style={{ width: '100%', height: '100%' }}>
                        {/* Label */}
                        <text
                            x={500}
                            y={140}
                            textAnchor="middle"
                            fill={colors.primary}
                            fontSize="16"
                            fontWeight="600"
                            opacity="0.7"
                        >
                            ‚Üê Lower % "{orderBy}" | Ordered by {orderBy} term usage | Higher % "{orderBy}" ‚Üí
                        </text>

                        {/* Theme bubbles with smooth transitions */}
                        {positionedThemes.map((theme) => {
                            const isHovered = hoveredNode === theme.id;
                            const isSelected = selectedTheme?.id === theme.id;
                            const termValue = theme.terms[orderBy] || 0;

                            return (
                                <g
                                    key={theme.id}
                                    style={{ 
                                        cursor: 'pointer',
                                        transition: 'transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)'
                                    }}
                                    transform={`translate(${theme.x}, ${theme.y})`}
                                    onClick={() => setSelectedTheme(theme)}
                                    onMouseEnter={() => setHoveredNode(theme.id)}
                                    onMouseLeave={() => setHoveredNode(null)}
                                >
                                    {/* Shadow */}
                                    <circle
                                        cx={0}
                                        cy={0}
                                        r={theme.size}
                                        fill="black"
                                        opacity="0.1"
                                        transform={`translate(4, 4)`}
                                    />
                                    
                                    {/* Main circle */}
                                    <circle
                                        cx={0}
                                        cy={0}
                                        r={theme.size}
                                        fill={theme.color}
                                        stroke={isSelected ? colors.yellow : (isHovered ? colors.primary : 'white')}
                                        strokeWidth={isSelected ? 6 : (isHovered ? 5 : 3)}
                                        opacity="0.9"
                                        filter={isHovered || isSelected ? "drop-shadow(0 6px 12px rgba(0,0,0,0.3))" : ""}
                                        style={{ transition: 'all 0.3s' }}
                                    />

                                    {/* Text */}
                                    <text
                                        x={0}
                                        y={-20}
                                        textAnchor="middle"
                                        fill="white"
                                        fontSize={Math.max(14, theme.size / 7)}
                                        fontWeight="bold"
                                    >
                                        {theme.name}
                                    </text>
                                    <text
                                        x={0}
                                        y={5}
                                        textAnchor="middle"
                                        fill="white"
                                        fontSize={Math.max(20, theme.size / 6)}
                                        fontWeight="bold"
                                    >
                                        {theme.volume.toLocaleString()}
                                    </text>
                                    <text
                                        x={0}
                                        y={25}
                                        textAnchor="middle"
                                        fill="white"
                                        fontSize={Math.max(11, theme.size / 9)}
                                        opacity="0.95"
                                    >
                                        {theme.percent} of searches
                                    </text>
                                    <text
                                        x={0}
                                        y={40}
                                        textAnchor="middle"
                                        fill="white"
                                        fontSize={Math.max(12, theme.size / 8.5)}
                                        opacity="0.9"
                                        fontWeight="700"
                                    >
                                        {termIcons[orderBy]} {termValue.toFixed(1)}%
                                    </text>
                                </g>
                            );
                        })}
                    </svg>

                    {/* Side panel */}
                    {selectedTheme && (
                        <div style={{
                            position: 'absolute',
                            top: 0,
                            right: 0,
                            width: '400px',
                            height: '100%',
                            background: 'white',
                            boxShadow: '-4px 0 20px rgba(0,0,0,0.2)',
                            animation: 'slideIn 0.3s ease-out',
                            overflowY: 'auto',
                            zIndex: 2000
                        }}>
                            <div style={{
                                position: 'sticky',
                                top: 0,
                                background: selectedTheme.color,
                                color: 'white',
                                padding: '25px',
                                zIndex: 10
                            }}>
                                <button
                                    onClick={() => setSelectedTheme(null)}
                                    style={{
                                        position: 'absolute',
                                        top: '20px',
                                        right: '20px',
                                        background: 'rgba(255,255,255,0.2)',
                                        border: 'none',
                                        borderRadius: '50%',
                                        width: '40px',
                                        height: '40px',
                                        cursor: 'pointer',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        color: 'white'
                                    }}
                                >
                                    <X size={24} />
                                </button>
                                <h2 style={{ margin: '0 0 10px 0', fontSize: '1.8em' }}>
                                    {selectedTheme.name}
                                </h2>
                                <div style={{ fontSize: '1.4em', fontWeight: 'bold', marginBottom: '5px' }}>
                                    {selectedTheme.volume.toLocaleString()}
                                </div>
                                <div style={{ opacity: 0.9 }}>
                                    {selectedTheme.percent} of total searches
                                </div>
                                {selectedTheme.description && (
                                    <div style={{ 
                                        opacity: 0.85, 
                                        marginTop: '12px', 
                                        fontSize: '0.95em',
                                        padding: '10px',
                                        background: 'rgba(255,255,255,0.15)',
                                        borderRadius: '6px',
                                        fontStyle: 'italic'
                                    }}>
                                        {selectedTheme.description}
                                    </div>
                                )}
                                <div style={{ opacity: 0.95, marginTop: '10px', fontSize: '1.15em', fontWeight: '600' }}>
                                    {termIcons[orderBy]} {(selectedTheme.terms[orderBy] || 0).toFixed(1)}% contain "{orderBy}"
                                </div>
                            </div>

                            <div style={{ padding: '25px' }}>
                                <h3 style={{ color: colors.primary, marginBottom: '15px' }}>
                                    Key Search Terms
                                </h3>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px', marginBottom: '30px' }}>
                                    {Object.entries(selectedTheme.terms)
                                        .sort((a, b) => b[1] - a[1])
                                        .map(([term, percent]) => (
                                            <div
                                                key={term}
                                                style={{
                                                    display: 'flex',
                                                    justifyContent: 'space-between',
                                                    alignItems: 'center',
                                                    padding: '12px',
                                                    background: term === orderBy ? `${selectedTheme.color}20` : colors.lightGray,
                                                    borderRadius: '8px',
                                                    border: term === orderBy ? `2px solid ${selectedTheme.color}` : 'none'
                                                }}
                                            >
                                                <span style={{ 
                                                    fontWeight: term === orderBy ? 'bold' : '600', 
                                                    color: colors.primary,
                                                    textTransform: 'capitalize'
                                                }}>
                                                    {term} {term === orderBy ? termIcons[orderBy] : ''}
                                                </span>
                                                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                                                    <div style={{
                                                        width: '80px',
                                                        height: '8px',
                                                        background: '#ddd',
                                                        borderRadius: '4px',
                                                        overflow: 'hidden'
                                                    }}>
                                                        <div style={{
                                                            width: `${Math.min(percent, 100)}%`,
                                                            height: '100%',
                                                            background: selectedTheme.color,
                                                            borderRadius: '4px'
                                                        }} />
                                                    </div>
                                                    <span style={{ 
                                                        color: colors.gray, 
                                                        fontSize: '0.9em',
                                                        fontWeight: 'bold',
                                                        minWidth: '45px',
                                                        textAlign: 'right'
                                                    }}>
                                                        {percent.toFixed(1)}%
                                                    </span>
                                                </div>
                                            </div>
                                        ))}
                                </div>

                                <h3 style={{ color: colors.primary, marginBottom: '15px' }}>
                                    Example Searches
                                </h3>
                                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                                    {selectedTheme.examples.map((example, idx) => (
                                        <div
                                            key={idx}
                                            style={{
                                                padding: '12px 15px',
                                                background: colors.lightGray,
                                                borderRadius: '8px',
                                                color: colors.gray,
                                                fontSize: '0.95em',
                                                borderLeft: `3px solid ${selectedTheme.color}`
                                            }}
                                        >
                                            {example}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<VennDiagram />);
    </script>
</body>
</html>